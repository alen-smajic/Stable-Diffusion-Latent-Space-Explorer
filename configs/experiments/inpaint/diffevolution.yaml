# STABLE DIFFUSION EXPERIMENT CONFIGURATION
# This config file contains the experiment configuration for the Stable Diffusion inpaint model from the diffusers library.


# IDENTIFIER CONFIGURATIONS
# Specifies the model and experiment identifiers.
# DO NOT CHANGE THESE!
model_identifier: inpaint
exp_identifier: diffevolution


# MODEL CONFIGURATIONS
# Specifies the model configurations.
model_id: /data/alen_smajic/FP_KI_Stable_Diffusion/weights/stable-diffusion-2-inpainting  # Name of the Stable Diffusion repository on HuggingFace (e.g. stabilityai/stable-diffusion-2-1) or the path to the cloned repository (e.g. /mypath/stable-diffusion-2-1).
scheduler: DPMSolverMultistepScheduler  # Name of the scheduler algorithm.
att_slicing: True  # Whether attention slicing should be used (reduces memory consumption during the diffusion process at the cost of speed).
vae_slicing: True  # Whether VAE slicing should be used (reduces memory consumption during the decoding stage at the cost of speed).
enable_xformers: False  # Whether to enable xFormers for optimized performance in the attention blocks (requires the xformers package).
gpu_id: 3  # GPU index.
diffusion_steps: 25  # Amount of diffusion steps to perform (higher values increase quality at the cost of speed).
guidance_scale: 9.5  # Guidance scale factor for classifier free guidance (higher values lead to better correspondence to the prompt, while lower values increase diversity).


# EXPERIMENT CONFIGURATIONS
# Specifies the experiment configurations.
output_path: /data/alen_smajic/FP_KI_Stable_Diffusion/experiments  # Path for storing the experiment results (a new folder will be placed at the specified location).
genes_per_generation: 4  # Specifies the amount of latent noise tensors that should be sampled per diffevolution step.
step_size: 0.1  # Specifies the step size for each diffevolution step.
# PROMPT CONFIGURATION
prompt: Photograph of an entrance to a majestic building during summer, HD, 4K, 8K|black and white, blurry, painting, drawing, low resolution, watermark  # Input prompt where the positive part is separated from the negative part by a vertical line "|" without any whitespace in between.
load_prompt_embeds: /data/alen_smajic/FP_KI_Stable_Diffusion/experiments/2023-03-20_17-41-02_inpaint_single-inference/embeddings/output-3_diffstep-25.pt  # Path to a local file containing the prompt embeddings. Caution the parameter "prompt" does not apply, if a pre-generated prompt embedding is loaded from a file.
# LATENT NOISE, IMAGE & MASK CONFIGURATION
rand_seed: 0  # Random seed for sampling reproducible latent noise that is added to the input image for inpainting.
height: 512  # Image height of the desired VAE output (used for resizing the input image and for computing the latent noise height).
width: 512  # Image width of the desired VAE output (used for resizing the input image and for computing the latent noise width).
load_latent_noise: /data/alen_smajic/FP_KI_Stable_Diffusion/experiments/2023-03-20_17-41-02_inpaint_single-inference/embeddings/output-3_diffstep-25.pt  # Path to a local file containing the latent noise tensor. Caution the parameters "rand_seed", "height", "width" and "images_per_prompt" do not apply, if a pre-generated latent noise tensor is loaded from a file.
image: /home/alen_smajic/FP_KI_Stable_Diffusion/resources/entry.png  # Path to a local image file.
mask: /home/alen_smajic/FP_KI_Stable_Diffusion/resources/entry_mask.png  # Path to a local mask image.